{"version":3,"sources":["util/db.ts","util/util.ts","gallery/PhotoPreview.tsx","gallery/PhotoFocus.tsx","util/url.ts","gallery/Gallery.tsx","navbar/Search.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Database","data","photoSort","sorted","arr","cb","concat","sort","a","b","compare","sortBy","this","photos","reverse","terms","orderBy","get","filter","p","some","t","description","includes","fetch","resp","json","PhotoPreview","props","hiRes","photo","image","className","style","backgroundImage","onClick","focusPhoto","date","PhotoFocus","onExit","UrlManager","hash","window","location","split","pop","console","log","replace","Gallery","useState","focused","setFocused","added","records","searchTerms","length","db","search","useEffect","readUrl","match","setUrl","onKeyDown","evt","code","current","elm","matcher","matchingElm","e","undefined","index","indexOf","getPrevInArray","getNextInArray","document","addEventListener","removeEventListener","map","i","Search","searchRaw","setSearchRaw","placeholder","value","onChange","raw","target","setSearchTerms","s","trim","App","setDb","load","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.10fabfc0.chunk.js","sourcesContent":["import { Data, Photo, PhotoSort } from \"./types\";\nimport { sortBy } from \"./util\";\n\nexport class Database {\n  private constructor(\n    private readonly data: Data) { }\n\n  get(photoSort: PhotoSort): Photo[] {\n    const sorted = sortBy(this.data.photos, photoSort.sortBy);\n    return photoSort.reverse ? sorted.reverse() : sorted;\n  }\n\n  search(terms: string[], orderBy: PhotoSort) {\n    return this.get(orderBy).filter(p => terms.some(t => p.description.includes(t)));\n  }\n\n  static async load() {\n    const resp = await fetch('data.json');\n    const json = await resp.json() as Data;\n    return new Database(json);\n  }\n}\n","\ntype Comparable = string | number | Date;\n\nfunction compare<T extends Comparable>(a: T, b: T) {\n  if (a < b) { return -1; }\n  if (a > b) { return 1; }\n  return 0;\n}\n\nexport function sortBy<T, V extends Comparable>(arr: T[], cb: ((obj: T) => V)): T[] {\n  const sorted = arr.concat();\n  sorted.sort((a, b) => compare(cb(a), cb(b)));\n  return sorted;\n}\n\nexport function getPrevInArray<T>(elm: T, arr: T[], matcher?: (a: T, b: T) => boolean): T {\n  const matchingElm = matcher ? arr.filter(e => matcher(e, elm))[0] : undefined;\n  const index = arr.indexOf(matchingElm ?? elm);\n  const newIndex = (arr.length + index - 1) % arr.length;\n  return arr[newIndex];\n}\n\nexport function getNextInArray<T>(elm: T, arr: T[], matcher?: (a: T, b: T) => boolean): T {\n  const matchingElm = matcher ? arr.filter(e => matcher(e, elm))[0] : undefined;\n  const index = arr.indexOf(matchingElm ?? elm);\n  const newIndex = (arr.length + index + 1) % arr.length;\n  return arr[newIndex];\n}\n","import React from \"react\";\nimport { Photo } from \"../util/types\";\nimport './PhotoPreview.css';\n\ninterface PhotoPreviewProps {\n  photo: Photo;\n  focusPhoto(photo: Photo): void;\n}\n\nexport function PhotoPreview(props: PhotoPreviewProps) {\n  const hiRes = `images/${props.photo.image}`;\n  return (\n    <div\n      className=\"PhotoPreview\"\n      style={{backgroundImage: `url(${hiRes})`}}\n      onClick={() => props.focusPhoto(props.photo)}\n    >\n      <div className=\"PhotoPreviewDate\">{props.photo.date}</div>\n    </div>\n  )\n}\n","import { Photo } from \"../util/types\";\nimport './PhotoFocus.css';\n\ninterface PhotoFocusProps {\n  photo: Photo;\n  onExit(): void;\n}\n\nexport function PhotoFocus(props: PhotoFocusProps) {\n  const hiRes = `images/${props.photo.image}`;\n  return (\n    <div className=\"PhotoFocus\" onClick={props.onExit}>\n      <div\n        className=\"PhotoFocusImage\"\n        style={{ backgroundImage: `url(${hiRes})` }}\n      >\n        &nbsp;\n      </div>\n      <div className=\"PhotoFocusDescription\">{props.photo.description}</div>\n    </div>\n  )\n}\n","import { Photo } from \"./types\";\n\nexport class UrlManager {\n  readUrl(): string | undefined {\n    const hash = window.location.hash.split('#').pop();\n    console.log('hash', hash);\n    return hash;\n  }\n  setUrl(photo?: Photo): void {\n    window.location.replace(`#${photo?.image ?? ''}`);\n  }\n}\n","import { useEffect, useState } from \"react\";\nimport { Database } from \"../util/db\";\nimport { PhotoPreview } from \"./PhotoPreview\";\nimport { Photo, PhotoSort } from \"../util/types\";\nimport './Gallery.css';\nimport { PhotoFocus } from \"./PhotoFocus\";\nimport { getNextInArray, getPrevInArray } from \"../util/util\";\nimport { UrlManager } from \"../util/url\";\n\ninterface GalleryProps {\n  db: Database;\n  searchTerms: string[];\n}\n\nexport function Gallery(props: GalleryProps) {\n  const [focused, setFocused] = useState<Photo>();\n  const [sortBy, setSortBy] = useState<PhotoSort>({\n    sortBy: p => p.added,\n    reverse: true,\n  });\n\n  // todo how to run after every setFocused?\n  function updateFocused(photo: Photo | undefined) {\n    setFocused(photo);\n    new UrlManager().setUrl(photo);\n  }\n  const records = props.searchTerms.length\n    ? props.db.search(props.searchTerms, sortBy)\n    : props.db.get(sortBy);\n\n  useEffect(() => {\n    const hash = new UrlManager().readUrl();\n    if (hash) {\n      const match = records.filter(p => p.image === hash)[0];\n      console.log(hash, match);\n      updateFocused(match);\n    }\n  }, []);\n\n  // todo does not work :(\n  function handleKeyDown(code: string) {\n    if (focused === undefined) { return; }\n    console.log(code);\n  };\n  useEffect(() => {\n    const onKeyDown = (evt: KeyboardEvent) => {\n      const records = props.db.get(sortBy);\n      if (evt.code === 'ArrowLeft') {\n        setFocused(current => getPrevInArray(current, records));\n      }\n      if (evt.code === 'ArrowRight') {\n        setFocused(current => getNextInArray(current, records));\n      }\n      if (evt.code === 'Escape') {\n        setFocused(undefined);\n      }\n    }\n\n    document.addEventListener('keydown', onKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <div\n      className=\"GalleryContainer\"\n      onKeyDown={evt => handleKeyDown(evt.code)}\n    >\n      {records.map((p, i) => (\n        <PhotoPreview\n          key={i}\n          photo={p}\n          focusPhoto={p => setFocused(p)}\n        />\n      ))}\n      {focused && (\n        <PhotoFocus\n          photo={focused}\n          onExit={() => setFocused(undefined)}\n        />\n      )}\n    </div>\n  )\n}\n","import React, { useState } from \"react\";\nimport './Search.css';\n\ninterface SearchProps {\n  setSearchTerms(terms: string[]): void;\n}\n\nexport function Search(props: SearchProps) {\n  const [searchRaw, setSearchRaw] = useState<string>('');\n\n  function parseSearchTerms(raw: string) {\n    setSearchRaw(raw);\n    props.setSearchTerms(raw.split(' ').map(s => s.trim()).filter(s => !!s));\n  }\n\n  return (\n    <input\n      className=\"Search\"\n      placeholder=\"Type here to search\"\n      value={searchRaw}\n      onChange={evt => parseSearchTerms(evt.target.value)}\n    />\n  )\n}\n","import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { Database } from './util/db';\nimport { Gallery } from './gallery';\nimport { Search } from './navbar';\n\nexport function App() {\n  const [db, setDb] = useState<Database>();\n  const [searchTerms, setSearchTerms] = useState<string[]>([]);\n\n  useEffect(() => {\n    (async () => {\n      const db = await Database.load();\n      console.log(db);\n      setDb(db);\n    })();\n  }, []);\n\n\n  return (\n    <div>\n      <header>\n        <h1>\n          Rockland Fan Site\n        </h1>\n        <Search setSearchTerms={setSearchTerms} />\n      </header>\n      {db ? (\n        <Gallery db={db} searchTerms={searchTerms} />\n      ) : (\n        <h1>loading...</h1>\n      )}\n    </div>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}